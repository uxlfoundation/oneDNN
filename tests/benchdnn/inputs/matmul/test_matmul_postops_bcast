# MatMul binary post-ops broadcasting examples (5D only)
# Masks follow oneDNN convention: bit i corresponds to dimension i.
# For ndims=5: full mask=31 (11111b); last dim mask=16 (10000b);
#             first+last mask=17 (10001b).
#             per_oc mask=2 (00010b); per_mb mask=1 (00001b);
#             per_mb_spatial mask=29 (11101b).

# 5D: no_broadcast (src1 same shape as dst) -> mask=31
--reset
--dt=f32
--stag=abcde
--wtag=abcde
--dtag=abcde
--attr-post-ops=add:f32:31:abcde
1x2x2x8x4:1x2x2x4x8

# 5D: scalar (src1 is scalar) -> mask=0
--reset
--dt=f32
--stag=abcde
--wtag=abcde
--dtag=abcde
--attr-post-ops=add:f32:0
1x2x2x8x4:1x2x2x4x8

# 5D: per_mb (broadcast on MB dim only) -> mask=1
--reset
--dt=f32
--stag=abcde
--wtag=abcde
--dtag=abcde
--attr-post-ops=add:f32:1:abcde
2x2x2x8x4:2x2x2x4x8

# 5D: per_oc_spatial (broadcast on C and spatial dims) -> mask=2
--reset
--dt=f32
--stag=abcde
--wtag=abcde
--dtag=abcde
--attr-post-ops=add:f32:2:abcde
1x2x2x8x4:1x2x2x4x8

# 5D: per_w (broadcast on last dim only) -> mask=16
--reset
--dt=f32
--stag=abcde
--wtag=abcde
--dtag=abcde
--attr-post-ops=add:f32:16:abcde
1x2x2x8x4:1x2x2x4x8

# 5D: per_mb_w (broadcast on first+last dims) -> mask=17
--reset
--dt=f32
--stag=abcde
--wtag=abcde
--dtag=abcde
--attr-post-ops=add:f32:17:abcde
3x2x2x8x4:3x2x2x4x8

# 5D: per_mb_spatial (broadcast on MB+spatial) -> mask=29
--reset
--dt=f32
--stag=abcde
--wtag=abcde
--dtag=abcde
--attr-post-ops=add:f32:29:abcde
2x2x2x8x4:2x2x2x4x8

# 5D: bidirectional broadcasting in matmul batch dims
# A batch = [2,1,3], B batch = [1,4,3] -> dst batch = [2,4,3]
--reset
--dt=f32
--stag=abcde
--wtag=abcde
--dtag=abcde
--attr-post-ops=add:f32:31:abcde
2x1x3x8x4:1x4x3x4x8
